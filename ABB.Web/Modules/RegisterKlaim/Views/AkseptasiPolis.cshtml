@using ABB.Application.RegisterKlaims.Queries
@using Kendo.Mvc.TagHelpers
@using Kendo.Mvc.UI
@using Microsoft.EntityFrameworkCore.Metadata.Internal
@using Microsoft.Extensions.Configuration
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Kendo.Mvc

@inject IConfiguration Configuration

<script src="~/Modules/RegisterKlaim/JS/registerKlaim.akseptasiPolis.js"></script>

<div class="window-body">
    
    <div class="row">
        <div class="col-offset-8"></div>
        <div class="col-md-4">
            <input type="text" class="search-field-top " id="SearchKeywordAkseptasiPolis" placeholder="Search"/>
        </div>
    </div>
    
    @(Html.Kendo().Grid<AkseptasiDto>()
        .Name("AkseptasiPolisGrid")
        .DataSource(dataSource => dataSource.Ajax()
            .Read(read => read.Action("GetAkseptasiPolis", "RegisterKlaim").Data("searchFilterAkseptasiPolis"))
        )
        .Columns(columns =>
        {
            columns.Bound(col => col.Id).Hidden();
            columns.Bound(col => col.nm_cb).Title("Cabang");
            columns.Bound(col => col.nm_cob).Title("COB");
            columns.Bound(col => col.nm_scob).Title("SCOB");
            columns.Bound(col => col.no_pol_ttg).Title("Nomor Polis").ClientTemplate("#= formatNoPol(no_pol_ttg) #");
            columns.Bound(col => col.no_rsk).Title("Nomor Resiko");
            columns.Bound(col => col.no_pol_pas).Title("Nomor Polis Ceding");
            columns.Bound(col => col.nm_ttg).Width(200).Title("Nama Tertanggung");
            columns.Bound(col => col.tgl_mul_ptg).Width(150).Title("Tanggal Mulai").Format("{0: dd-MM-yyyy}");
            columns.Bound(col => col.tgl_akh_ptg).Width(150).Title("Tanggal Akhir").Format("{0: dd-MM-yyyy}");
            columns.Bound(col => col.tgl_closing).Width(150).Title("Tanggal Closing").Format("{0: dd-MM-yyyy}");
            columns.Bound(col => col.ket_oby).Width(200).Title("Keterangan Resiko");
        })
        .Selectable()
        .Pageable(pager => pager
            .Refresh(true)
            .Info(true)
            .PageSizes(true)
        )
        .Sortable()
        .Filterable()
        .Scrollable()
        .Height(380)
        .Resizable(a => a.Columns(true))
        .Events(ev => ev.DataBound("gridAutoFit").Change("OnAkseptasiChange"))

        )
</div>

