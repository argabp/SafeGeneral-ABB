@using Kendo.Mvc.UI
@using Kendo.Mvc.TagHelpers
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Kendo.Mvc

@{
    Layout = "~/Modules/Shared/_Layout.cshtml";
    ViewData["Title"] = "List Voucher";
}

@* Ganti JS ke file JS yang baru jika Anda membuatnya, atau biarkan *@
<style>
    /* CSS untuk menyembunyikan/menampilkan section Kode Bank */
    #kodeBankSection {
        display: none; /* Sembunyi by default */
    }
</style>
<nav  aria-label="breadcrumb">
   <ol class="breadcrumb" style="background: white; ">
        <li class="breadcrumb-item"><a href="#">Finance</a></li>
        <li class="breadcrumb-item active" aria-current="page">Listing Voucher Kas Bank</li>
    </ol>
    </nav>
<div class="flat-box">
    <div class=flat-box-title>
        List Voucher Kas Bank
    </div>

    <div class="flat-box-content">
        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Tipe Voucher</label>
            <div class="col-sm-4">
                @(Html.Kendo().DropDownList()
                    .Name("TipeVoucher")
                    .DataTextField("Text")
                    .DataValueField("Value")
                    .BindTo(new List<SelectListItem>() {
                        new SelectListItem() { Text = "Bank", Value = "BANK" },
                        new SelectListItem() { Text = "Kas", Value = "KAS" }
                    })
                    .Events(e => e.Change("onTipeVoucherChange")) // Panggil JS saat diganti
                    .HtmlAttributes(new { style = "width: 100%" })
                )
            </div>
        </div>

        <div class="form-group row" id="kodeBankSection" style=" display: flex;">
            <label class="col-sm-2 col-form-label">Kode Bank</label>
            <div class="col-sm-4">
                @(Html.Kendo().ComboBox()
                    .Name("KodeBank")
                    .Placeholder("Pilih Bank...")
                    // Ganti "Keterangan" menjadi nama property baru di controller
                    .DataTextField("TampilanLengkap") 
                    .DataValueField("Kode")
                    .Filter("contains") // Tambahkan ini agar user bisa cari ketik kode atau nama
                    .DataSource(source => {
                        source.Read(read => {
                            read.Action("GetKasBankList", "ListVoucher").Data("getTipeBank");
                        });
                    })
                    .HtmlAttributes(new { style = "width: 100%" })
                )
            </div>
        </div>

        <div class="form-group row">
            <label class="col-sm-2 col-form-label">Tanggal</label>
            <div class="col-sm-2">
                @(Html.Kendo().DatePicker()
                    .Name("TanggalAwal")
                    .Value(DateTime.Now)
                    .HtmlAttributes(new { style = "width: 100%" })
                )
            </div>
            <label class="col-sm-1 col-form-label text-center">s/d</label>
            <div class="col-sm-2">
                @(Html.Kendo().DatePicker()
                    .Name("TanggalAkhir")
                    .Value(DateTime.Now)
                    .HtmlAttributes(new { style = "width: 100%" })
                )
            </div>
        </div>
        
        <div class="form-group row">
            <div class="col-sm-6">
                <button type="button" id="btn-cetak" class="btn btn-primary">Cetak</button>
            </div>
        </div>
    </div>
</div>

<div id="printResult"></div>
<script src="~/Modules/ListVoucher/JS/ListVoucher.index.js"></script>
