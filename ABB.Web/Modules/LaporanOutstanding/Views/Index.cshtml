@using Kendo.Mvc.UI
@using Kendo.Mvc.TagHelpers
@using ABB.Application.InquiryNotaProduksis.Queries
@using Microsoft.Extensions.Configuration
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Kendo.Mvc

@inject IConfiguration Configuration

@{
    Layout = "~/Modules/Shared/_Layout.cshtml";
    ViewData["Title"] = "Laporan Outstanding";
}

<script src="~/Modules/LaporanOutstanding/JS/LaporanOutstanding.index.js"></script>

<style>
    .filter-section {
        display: flex;
        align-items: center;
        gap: 10px;
        margin-bottom: 10px;
        flex-wrap: wrap;
    }

    .filter-label {
        font-weight: bold;
        width: 90px;
    }

    .filter-container {
        padding: 15px;
    }
     .breadcrumb-item + .breadcrumb-item::before {
        content: ">"; /* Ganti '/' dengan '>' */
        padding: 0 .5rem; /* Atur spasi jika perlu */
    }
</style>

<nav  aria-label="breadcrumb">
   <ol class="breadcrumb" style="background: white; ">
        <li class="breadcrumb-item"><a href="#">Finance</a></li>
        <li class="breadcrumb-item active" aria-current="page">Laporan Outstanding</li>
    </ol>
    </nav>

<div class="flat-box filter-box">
    <div class="flat-box-content filter-container">
    <label>DATA PRODUKSI</label><hr>
        <!-- Baris 1: Lokasi -->
        <div class="filter-section">
            <label class="filter-label" for="KodeCabang">Lokasi :</label>
            @(Html.Kendo().ComboBox()
                .Name("KodeCabang")
                .Placeholder("Pilih Cabang ...")
                .DataTextField("nm_cb")
                .DataValueField("kd_cb")
                .Filter("contains")
                .Suggest(true)
                .HtmlAttributes(new { style = "width:300px;" })
                .Template("#: kd_cb # - #: nm_cb #")
                .DataSource(source => {
                    source.Read(read => {
                        read.Action("GetKodeCabang", "LaporanOutstanding");
                    });
                })
                .AutoBind(true)
                .Enable(false)
                .Value(ViewBag.UserCabangValue) 
                .Text(ViewBag.UserCabangText)   
            )
        </div>

        <div class="filter-section">
            <div style="margin-bottom: 10px;">
                @(Html.Kendo().RadioButton()
                    .Name("JenisTransaksi")
                    .Value("Piutang")
                    .Label("Piutang")
                    .HtmlAttributes(new { id = "JenisTransaksi_Piutang" }) // Tambahkan ID untuk referensi JS
                )

                @(Html.Kendo().RadioButton()
                    .Name("JenisTransaksi")
                    .Value("Hutang")
                    .Label("Hutang")
                    .HtmlAttributes(new { id = "JenisTransaksi_Hutang" }) // Tambahkan ID untuk referensi JS
                )
            </div>

            <div id="checkboxContainer" style="padding: 10px; background-color: #e0ffe0; border: 1px solid #c0ffc0;">
                <div style="display: flex; flex-wrap: wrap; gap: 10px;">
                    <div style="width: 48%;">
                        @(Html.Kendo().CheckBox()
                            .Name("Check1")
                            .Label("A1-Pos Sendiri")
                        )
                    </div>
                    <div style="width: 48%;">
                        @(Html.Kendo().CheckBox()
                            .Name("Check2")
                            .Label("B1-Reas Msk Tty")
                        )
                    </div>
                    <div style="width: 48%;">
                        @(Html.Kendo().CheckBox()
                            .Name("Check3")
                            .Label("A2-Koas Masuk")
                        )
                    </div>
                    <div style="width: 48%;">
                        @(Html.Kendo().CheckBox()
                            .Name("Check4")
                            .Label("B2-Reas Msk N-Tty")
                        )
                    </div>
                </div>
            </div>
        </div>

       <div class="filter-section" style="display: flex; align-items: center;">
            <label class="filter-label" for="JenisAsset">PRODUKSI :</label>

            @(Html.Kendo().DatePicker()
                .Name("tgl1")
                .Format("dd-MM-yyyy")
                .HtmlAttributes(new { style = "width:150px; margin-right: 5px;" }) )

            <label class="filter-label" for="JenisAssetSD">S/D :</label>

            @(Html.Kendo().DatePicker()
                .Name("tgl2")
                .Format("dd-MM-yyyy")
                .HtmlAttributes(new { style = "width:150px;" })
            )
        </div>

         <hr><label style="margin-top:10px">DATA PELUNASAN</label><hr>
         <div class="filter-section">
            <label class="filter-label" for="JenisAsset">PELUNASAN S/D TGL :</label>

            @(Html.Kendo().DatePicker()
                .Name("tglpelunasan")
                .Format("dd-MM-yyyy")
                .HtmlAttributes(new { style = "width:150px" }) )
        </div>

       

        <!-- Baris 4: Tombol Cari -->
        <div class="filter-section">
            @(Html.Kendo().Button()
                .Name("btnSearch")
                .Content("<span class='k-icon k-i-search'></span> Cari")
                .HtmlAttributes(new { @class = "k-primary", style = "border-radius:6px; width:120px;" })
                .Events(e => e.Click("onSearchClick"))
            )
        </div>

    </div>
</div>

<script>
    $(document).ready(function () {
        // Fungsi untuk mengontrol visibilitas
        function toggleCheckboxes() {
            // Cek apakah radio button 'Hutang' terpilih
            if ($('#JenisTransaksi_Piutang').is(':checked')) {
                // Tampilkan container checkbox
                $('#checkboxContainer').show();
            } else {
                // Sembunyikan container checkbox
                $('#checkboxContainer').hide();
            }
        }

        // 1. Jalankan saat dokumen siap (untuk set awal)
        toggleCheckboxes();

        // 2. Jalankan saat salah satu radio button diubah
        $('input[name="JenisTransaksi"]').change(function() {
            toggleCheckboxes();
        });
    });
</script>